<!DOCTYPE html>
<html>
  <head>
    <script src="../../webdriver-bootstrap.js"></script>
    <script src="../../deps.js"></script>
    <script type="text/javascript" src="../scripts/htmlutils.js"></script>
    <script type="text/javascript" src="../scripts/selenium-logging.js"></script>
<script type="text/javascript" src="../scripts/selenium-api.js"></script>
    <script type="text/javascript" src="../scripts/selenium-browserbot.js"></script>
    <script type="text/javascript">
      goog.require('bot.dom');
      goog.require('core.firefox');
      goog.require('core.text');
      goog.require('goog.testing.jsunit');
    </script>
    <script type="text/javascript">
      var browserVersion = {};

      var browserbot;

      function setUp() {
        browserbot = new MozillaBrowserBot(window);
      }

      function assertStyleIs(locator, expectedStyle) {
        var actualStyle = browserbot.findAttribute(locator, 'style');
        if (expectedStyle == null) {
          assertNull(actualStyle);
        } else {
          assertEquals(expectedStyle, actualStyle);
        }
      }

      function testStyleAttributeReturnsCssText() {
        assertStyleIs('id=child@style', 'visibility: inherit;');
      }

      function testStyleAttributeReturnsWithTrailingSemicolon() {
        assertStyleIs('id=parent@style', 'visibility: visible;');
      }

      // TODO(simon): Renable this test
      function xtestShouldReturnNullIfElementDoesNotHaveAStyleAttribute() {
        assertStyleIs('xpath=//body@style', null);
      }

      // TODO(simon): Renable this test
      function xtestShouldReturnNullIfElementHasAnEmptyStyleAttribute() {
        assertStyleIs('id=empty-style@style', null);
      }

      function testEmptyAttributesShouldNotBeInterpretedAsBeingNull() {
        var value = browserbot.findAttribute("id=hasAttributes@emptyAttr");
        assertTrue(value === '');
      }

      function testShouldReturnNullWhenElementsAreMissing() {
        var value = browserbot.findAttribute("id=hasAttributes@nope");
        assertTrue(goog.isNull(value));  
      }

	function testClick() {
	        var selenium = new Selenium(browserbot);
	for(var i =0;i<5000;i++){
		console.log("waiting for 5000,current"+i+",then click");
	}
	            selenium.doClick("id=click");
	         var tmp=  selenium.getText("id=new");
	console.log("get text of 'id=new' is "+tmp);
	      }
      function afterclick(){
		 var div=document.getElementById("showhere");
		      div.innerHTML="<div id='new'><font color=red> after click, I'm new word</font></div>";
     }

    </script>
    <style type="text/css">
      #child {
        height: 20px
      }
    </style>
  </head>
  <body> <!-- DO NOT PUT A STYLE ATTRIBUTE ON BODY! -->

    <div id="sample begin"> this is a selenium sample, it will simulate click a button and then show  </div>
    <input type="button" id="click" value="Click me" onclick="afterclick()" />
    <div id="showhere"><div id="new"><font color=blue> old word</font></div></div>
<p>
	<p>
    <div id="empty-style" style="">i have no style!</div>

    <div id="parent" style="visibility: visible">A parent div
      <div id="child" style="visibility: inherit;display:;">A child div</div>
    </div>
    <a href="http://localhost:4459/arrow/static/Users/yuhongli/src/shanghai/shanghai/selenium/javascript/selenium-atoms/test/se_element_test.html" id="click2" name="clicks">click me</a>
    <span id="hasAttributes" emptyAttr="">This is a span</span>
  </body>
</html>